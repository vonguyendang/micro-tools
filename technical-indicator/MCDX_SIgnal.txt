// This Pine Script™ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © HUYNHDUCTAI

//@version=6
indicator("MCDX", overlay=false)

// Các tham số đầu vào
RSIBaseBanker = input.float(50, title="Banker Base", minval=0.1, maxval=100)
RSIPeriodBanker = input.int(50, title="Banker RSI Period", minval=10, maxval=100)
RSIBaseHotMoney = input.float(30, title="Hot Money RSI Base", minval=0.1, maxval=100)
RSIPeriodHotMoney = input.int(40, title="Hot Money RSI Period", minval=10, maxval=100)
SensitivityBanker = input.float(1.5, title="Sensitivity Banker", minval=0.1, maxval=10)
SensitivityHotMoney = input.float(0.7, title="Sensitivity Hot Money", minval=0.1, maxval=10)
bankerPeriodMA = input.int(10, title="MA Banker Period", minval=1, maxval=260)

// Tính toán RSI Banker và RSI Hot Money
_raw_RSI_Banker = SensitivityBanker * (ta.rsi(close, RSIPeriodBanker) - RSIBaseBanker)
_raw_RSI_HotMoney = SensitivityHotMoney * (ta.rsi(close, RSIPeriodHotMoney) - RSIBaseHotMoney)

// Giới hạn giá trị RSI
RSI_Banker = math.min(math.max(_raw_RSI_Banker, 0), 20)
RSI_HotMoney = math.min(math.max(_raw_RSI_HotMoney, 0), 20)

// Tính đường trung bình động của Banker
BankerMA = ta.sma(RSI_Banker, bankerPeriodMA)

// Vẽ biểu đồ
plot(20, color=color.green, style=plot.style_columns, title="Base")
plot(20- RSI_HotMoney, color=color.green, style=plot.style_columns, title="Retailer")

plot(RSI_HotMoney, color=color.yellow, style=plot.style_columns, title="Hot Money")
plot(RSI_Banker, color=(RSI_Banker >= BankerMA ? color.new(color.red,20) : color.new(color.fuchsia,50)), style=plot.style_columns, title="Banker")
plot(BankerMA, color=color.black, linewidth=1, title="Banker MA")

// Các đường mức
hline(15, "", color=color.rgb(173, 52, 203), linestyle=hline.style_dashed, linewidth=1)
hline(10, "", color=color.rgb(173, 52, 203), linestyle=hline.style_dashed, linewidth=1)
hline(5, "", color=color.rgb(173, 52, 203), linestyle=hline.style_dashed, linewidth=1)

